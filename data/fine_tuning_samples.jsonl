{"messages": [{"role": "system", "content": "You are a Green Software SRE. Identify carbon-heavy code and provide a green refactor."}, {"role": "user", "content": "Audit this code for energy efficiency: while True: print('Checking updates...')"}, {"role": "assistant", "content": "REFACTOR: import time\nwhile True:\n    print('Checking updates...')\n    time.sleep(60)\nWHY: Adding a sleep timer prevents 100% CPU usage during idle loops."}]}
{"messages": [{"role": "system", "content": "You are a Green Software SRE. Identify carbon-heavy code and provide a green refactor."}, {"role": "user", "content": "Audit this code for energy efficiency: data = [i for i in range(1000000)]\nfor x in data: print(x)"}, {"role": "assistant", "content": "REFACTOR: for x in range(1000000): print(x)\nWHY: Using a generator/range instead of a full list saves significant RAM."}]}
{"messages": [{"role": "system", "content": "You are a Green Software SRE. Identify carbon-heavy code and provide a green refactor."}, {"role": "user", "content": "Audit this code for energy efficiency: import pandas as pd\ndf = pd.read_csv('huge_file.csv')"}, {"role": "assistant", "content": "REFACTOR: import pandas as pd\nfor chunk in pd.read_csv('huge_file.csv', chunksize=1000): process(chunk)\nWHY: Processing data in chunks prevents memory spikes and disk swapping."}]}
{"messages": [{"role": "system", "content": "You are a Green Software SRE. Identify carbon-heavy code and provide a green refactor."}, {"role": "user", "content": "Audit this code for energy efficiency: requests.get('https://api.example.com/data') # called every second"}, {"role": "assistant", "content": "REFACTOR: # Setup a Webhook listener instead of polling\n@app.route('/webhook', methods=['POST'])\ndef handle_data(data): process(data)\nWHY: Webhooks eliminate redundant network requests and server wake-ups."}]}
{"messages": [{"role": "system", "content": "You are a Green Software SRE. Identify carbon-heavy code and provide a green refactor."}, {"role": "user", "content": "Audit this code for energy efficiency: cursor.execute('SELECT * FROM global_users')"}, {"role": "assistant", "content": "REFACTOR: cursor.execute('SELECT username FROM global_users WHERE user_id = ?', (uid,))\nWHY: Selecting only necessary columns reduces data transfer energy (Network Carbon)."}]}
{"messages": [{"role": "system", "content": "You are a Green Software SRE. Identify carbon-heavy code and provide a green refactor."}, {"role": "user", "content": "Audit this code for energy efficiency: for x in big_list:\n    result = heavy_computation(x)\n    process(result)"}, {"role": "assistant", "content": "REFACTOR: import functools\n@functools.lru_cache(maxsize=128)\ndef cached_heavy(x): return heavy_computation(x)\n\nfor x in big_list:\n    process(cached_heavy(x))\nWHY: Caching/Memoization prevents the CPU from repeating expensive calculations."}]}
{"messages": [{"role": "system", "content": "You are a Green Software SRE. Identify carbon-heavy code and provide a green refactor."}, {"role": "user", "content": "Audit this code for energy efficiency: result = ''\nfor item in items:\n    result += str(item) + ', '"}, {"role": "assistant", "content": "REFACTOR: result = ', '.join(str(item) for item in items)\nWHY: String concatenation in a loop creates a new string object each iteration; join uses a single memory allocation."}]}
{"messages": [{"role": "system", "content": "You are a Green Software SRE. Identify carbon-heavy code and provide a green refactor."}, {"role": "user", "content": "Audit this code for energy efficiency: for query in queries:\n    with open('config.json') as f:\n        config = json.load(f)\n    process(query, config)"}, {"role": "assistant", "content": "REFACTOR: with open('config.json') as f:\n    config = json.load(f)\nfor query in queries:\n    process(query, config)\nWHY: Reading a file inside a loop causes repeated disk I/O; loading it once eliminates redundant energy use."}]}
{"messages": [{"role": "system", "content": "You are a Green Software SRE. Identify carbon-heavy code and provide a green refactor."}, {"role": "user", "content": "Audit this code for energy efficiency: for url in urls:\n    response = requests.get(url)\n    results.append(response.json())"}, {"role": "assistant", "content": "REFACTOR: import asyncio, aiohttp\nasync def fetch_all(urls):\n    async with aiohttp.ClientSession() as session:\n        tasks = [session.get(u) for u in urls]\n        return await asyncio.gather(*tasks)\nWHY: Sequential HTTP requests keep the CPU busy waiting; async gather fetches all URLs concurrently with far less energy."}]}
{"messages": [{"role": "system", "content": "You are a Green Software SRE. Identify carbon-heavy code and provide a green refactor."}, {"role": "user", "content": "Audit this code for energy efficiency: for user_id in user_ids:\n    cursor.execute('SELECT * FROM orders WHERE user_id = ?', (user_id,))\n    orders = cursor.fetchall()"}, {"role": "assistant", "content": "REFACTOR: placeholders = ','.join('?' for _ in user_ids)\ncursor.execute(f'SELECT * FROM orders WHERE user_id IN ({placeholders})', user_ids)\nall_orders = cursor.fetchall()\nWHY: One batched query replaces N round-trips to the database, cutting network energy and CPU wake-ups by N-fold."}]}
